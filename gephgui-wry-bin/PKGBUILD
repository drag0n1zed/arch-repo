# Maintainer: Geph Team <contact@geph.io>
# Contributor: drag <drag0n1zed@outlook.com>
pkgname=gephgui-wry-bin
pkgver=5.3.1
pkgrel=1
pkgdesc="The desktop GUI for Geph (pre-compiled binary)"
arch=('x86_64')
url="https://github.com/geph-official/gephgui-wry"
license=('GPL3')
depends=('webkit2gtk')
provides=('gephgui-wry')
conflicts=('gephgui-wry' 'gephgui-wry-git')
source=("https://github.com/geph-official/gephgui-pkg/releases/download/v${pkgver}/gephgui-wry_${pkgver}_amd64.deb"
        "gephgui-wry.sh")
sha256sums=('5f02454b1af0b0ed9d27083ef3b83830b335cff15ad8617b7603864091fd00f1'
            '2ade4a271abd957a21f9392804f2515346372397ad493f391c5dcc86502b91c1')

package() {
  cd "${srcdir}"

  bsdtar -xf data.tar.*

  sed -i 's|^Exec=.*|Exec=gephgui-wry.sh|' "usr/share/applications/geph.desktop"

  install -Dm755 "gephgui-wry.sh" "${pkgdir}/usr/bin/gephgui-wry.sh"

  cp -dr "usr" "${pkgdir}/"

  mv "${pkgdir}/usr/share/applications/geph.desktop" "${pkgdir}/usr/share/applications/gephgui-wry.desktop"
}
