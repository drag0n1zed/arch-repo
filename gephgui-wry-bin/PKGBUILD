# Maintainer: Geph Team <contact@geph.io>
# Contributor: drag <drag0n1zed@outlook.com>
pkgname=gephgui-wry-bin
pkgver=0.0.1
pkgrel=1
pkgdesc="The desktop GUI for Geph (pre-compiled binary)"
arch=('x86_64')
url="https://github.com/geph-official/gephgui-wry"
license=('GPL3')
depends=('webkit2gtk')
provides=('gephgui-wry')
conflicts=('gephgui-wry' 'gephgui-wry-git')
source=("https://github.com/geph-official/gephgui-pkg/releases/download/v${pkgver}/gephgui-wry_${pkgver}_amd64.deb"
        "gephgui-wry.sh")
sha256sums=('SKIP'
            'SKIP')

package() {
  cd "${srcdir}"

  bsdtar -xf data.tar.*

  sed -i 's|^Exec=.*|Exec=gephgui-wry.sh|' "usr/share/applications/geph.desktop"

  install -Dm755 "gephgui-wry.sh" "${pkgdir}/usr/bin/gephgui-wry.sh"

  cp -dr --no-preserve-ownership "usr" "${pkgdir}/"

  mv "${pkgdir}/usr/share/applications/geph.desktop" "${pkgdir}/usr/share/applications/gephgui-wry.desktop"
}
